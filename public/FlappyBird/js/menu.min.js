(function(){"use strict";function t(){this.world=null;this.titleTxt=null;this.startTxt=null;this.score=0;this.updateUrl="//"+document.domain+"/UpdateScore";this.topListUrl="//"+document.domain+"/TopList"}t.prototype={create:function(){var t=this.game.width*.5;var i=this.game.height*.5;this.world.create(0,0,"background");this.titleTxt=this.add.bitmapText(t,i-400,"gamefont","FLAPPY BIRD");this.titleTxt.scale.setTo(2,2);this.titleTxt.align="center";this.titleTxt.x=t-this.titleTxt.textWidth;this.add.button(t-125,i+125,"start",this.actionOnClick,this);var e=this.add.graphics(t-200,i-300);e.lineStyle(5,16777215,1);e.beginFill(14538900,1);e.drawRect(0,0,400,400);this.addScore()},addScore:function(){var t=this.score;var a;var s=this.topListUrl;$.ajax({url:this.updateUrl,type:"post",async:false,data:{data:encrypt('{"score" : '+t+"}")},success:function(t){var i=s;var e;$.ajax({url:i,type:"get",async:false,success:function(t){e=t.data}});a=e}});var i=this.game.width*.5;var e=this.game.height*.5;var r=this.add.bitmapText(i,e-295,"gamefont","Your Score");r.align="center";r.x=i-r.textWidth*.5;r=this.add.bitmapText(i,e-275,"gamefont",""+this.score);r.align="center";r.scale.setTo(2,2);r.x=i-r.textWidth;r=this.add.bitmapText(i,e-200,"gamefont","Top3");r.align="center";r.x=i-r.textWidth*.5;for(var n=0;n<a.list.length;++n){if(a.list[n].score==0)break;if(a.list[n].userId===a.currentUser){r=this.add.bitmapText(i,e-(150-50*n),"gamefont",""+(n+1)+"  "+a.list[n].score+"(YOU!)")}else{r=this.add.bitmapText(i,e-(150-50*n),"gamefont",""+(n+1)+"  "+a.list[n].score)}r.align="left";r.scale.setTo(2,2);r.x=i-180}},actionOnClick:function(){this.game.state.start("game")}};window["flappybird"]=window["flappybird"]||{};window["flappybird"].Menu=t})();